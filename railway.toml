# Railway configuration for backend service
[build]
builder = "DOCKERFILE"
dockerfilePath = "backend/Dockerfile"
dockerContext = "backend"

# Pass environment variables as Docker build arguments
[build.buildArgs]
GITHUB_NPM_PUBLISH_TOKEN = "${GITHUB_NPM_PUBLISH_TOKEN}"

[deploy]
restartPolicyMaxRetries = 10
restartPolicyType = "on_failure"
healthcheckPath = "/health"
healthcheckTimeout = 100

# Note: Railway automatically assigns PORT (typically 8080)
# The app reads from process.env.PORT in src/lib/config.ts

[env]
# Railway will provide PORT automatically (typically 8080)
# Add your other environment variables in Railway dashboard:
# - GITHUB_NPM_PUBLISH_TOKEN (required) - GitHub Personal Access Token for @jackdo69 packages
# - DATABASE_URL (required) - Supabase PostgreSQL connection string
# - SECRET_KEY (required) - JWT signing key
# - CORS_ORIGINS (required) - e.g., https://your-app.vercel.app
# - GOOGLE_CLIENT_ID (optional) - For Google OAuth
# - GOOGLE_CLIENT_SECRET (optional) - For Google OAuth
# - GOOGLE_REDIRECT_URI (optional) - e.g., https://api.railway.app/api/auth/google/callback
